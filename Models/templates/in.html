<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yield Prediction | FarmFlow</title>
  <style>
    :root { --farm-green-500:#4CAF50; --farm-green-600:#388E3C; --farm-green-700:#2E7D32; --golden-yellow-500:#FBC02D; --soft-beige-950:#FAF3E0; --soft-beige-200:#E8DCC0; }
    body { font-family: 'Roboto','Open Sans',sans-serif; background: var(--soft-beige-950); margin:0; min-height:100vh; display:flex; flex-direction:column; }
    .ff-navbar { position:sticky; top:0; z-index:100; background:rgba(255,255,255,.95); border-bottom:1px solid var(--soft-beige-200); box-shadow:0 2px 6px rgba(0,0,0,.06); backdrop-filter:blur(6px); }
    .ff-navbar .brand { font-weight:700; color:var(--farm-green-700); }
    .wrap { padding: 24px; display:flex; justify-content:center; }
    .container { width:100%; max-width: 720px; background: var(--soft-beige-950); padding: 24px; border-radius: 20px; box-shadow: 0 6px 16px rgba(0,0,0,.12); border:1px solid var(--soft-beige-200); }
    h1 { margin: 0 0 16px; color: var(--farm-green-700); }
    label { display:block; margin-top:10px; font-weight:600; color:#2d3748; }
    input, select { width:100%; padding:10px 12px; margin-top:6px; border:1px solid #cbd5e1; background:#fff; border-radius:10px; transition: all .2s ease; }
    input:hover, select:hover { border-color:#94a3b8; }
    input:focus, select:focus { border-color: var(--farm-green-500); box-shadow:0 0 0 3px rgba(76,175,80,.12); outline:none; }
    input::placeholder { color:#9aa1a9; opacity:1; }
    .is-invalid { border-color:#ef4444 !important; box-shadow:0 0 0 3px rgba(239,68,68,.12) !important; }
    .btn { margin-top:20px; padding:12px; background: var(--farm-green-500); color:#fff; border:none; border-radius:10px; cursor:pointer; transition: all .2s ease; }
    .btn:hover { background: var(--farm-green-600); transform: translateY(-1px); box-shadow:0 6px 16px rgba(76,175,80,.28); }
    .result { margin-top:20px; padding:14px; background:#ecfdf5; border:1px solid #a7f3d0; border-radius:10px; }
    .error { margin-top:20px; padding:14px; background:#fee2e2; border:1px solid #ef4444; border-radius:10px; }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    const I18N = {
      en: {
        brand: 'FarmFlow', page: 'Yield Estimation', back:'‚Üê Back to Dashboard',
        title: 'Yield Prediction', area: 'Area (hectares)', areaPh: 'e.g., 2.5',
        state: 'State', statePh: 'e.g., Maharashtra', district: 'District', districtPh: 'e.g., Pune',
        season: 'Season', select: 'Select...', crop: 'Crop', cropPh: 'e.g., Wheat',
        seasons: { Kharif:'Kharif', Rabi:'Rabi', 'Whole Year':'Whole Year', Summer:'Summer', Autumn:'Autumn', Winter:'Winter' },
        submit: 'Predict', predicted: 'Predicted Production:', error: 'Error:'
      },
      hi: {
        brand: 'FarmFlow', page: '‡§â‡§™‡§ú ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®', back:'‚Üê ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏',
        title: '‡§â‡§™‡§ú ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®', area: '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§´‡§≤ (‡§π‡•á‡§ï‡•ç‡§ü‡•á‡§Ø‡§∞)', areaPh: '‡§â‡§¶‡§æ., 2.5',
        state: '‡§∞‡§æ‡§ú‡•ç‡§Ø', statePh: '‡§â‡§¶‡§æ., ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞', district: '‡§ú‡§ø‡§≤‡§æ', districtPh: '‡§â‡§¶‡§æ., ‡§™‡•Å‡§£‡•á',
        season: '‡§Æ‡•å‡§∏‡§Æ', select: '‡§ö‡•Å‡§®‡•á‡§Ç...', crop: '‡§´‡§∏‡§≤', cropPh: '‡§â‡§¶‡§æ., ‡§ó‡•á‡§π‡•Ç‡§Ç',
        seasons: { Kharif:'‡§ñ‡§∞‡•Ä‡§´', Rabi:'‡§∞‡§¨‡•Ä', 'Whole Year':'‡§™‡•Ç‡§∞‡•á ‡§µ‡§∞‡•ç‡§∑', Summer:'‡§ó‡§∞‡•ç‡§Æ‡•Ä', Autumn:'‡§™‡§§‡§ù‡§°‡§º', Winter:'‡§∏‡§∞‡•ç‡§¶‡•Ä' },
        submit: '‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä ‡§ï‡§∞‡•á‡§Ç', predicted: '‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:', error: '‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:'
      },
      kn: {
        brand: 'FarmFlow', page: '‡≤â‡≤§‡≥ç‡≤™‡≤æ‡≤¶‡≤®‡≥Ü ‡≤Ö‡≤Ç‡≤¶‡≤æ‡≤ú‡≥Å', back:'‚Üê ‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç‚Äå‡≤ó‡≥Ü ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø',
        title: '‡≤â‡≤§‡≥ç‡≤™‡≤æ‡≤¶‡≤®‡≥Ü ‡≤Ö‡≤Ç‡≤¶‡≤æ‡≤ú‡≥Å', area: '‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂ (‡≤π‡≥Ü‡≤ï‡≥ç‡≤ü‡≥á‡≤∞‡≥ç)', areaPh: '‡≤â‡≤¶‡≤æ., 2.5',
        state: '‡≤∞‡≤æ‡≤ú‡≥ç‡≤Ø', statePh: '‡≤â‡≤¶‡≤æ., ‡≤ï‡≤∞‡≥ç‡≤®‡≤æ‡≤ü‡≤ï', district: '‡≤ú‡≤ø‡≤≤‡≥ç‡≤≤‡≥Ü', districtPh: '‡≤â‡≤¶‡≤æ., ‡≤Æ‡≥à‡≤∏‡≥Ç‡≤∞‡≥Å',
        season: '‡≤ã‡≤§‡≥Å', select: '‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø...', crop: '‡≤¨‡≥Ü‡≤≥‡≥Ü', cropPh: '‡≤â‡≤¶‡≤æ., ‡≤ó‡≥ã‡≤ß‡≤ø',
        seasons: { Kharif:'‡≤ñ‡≤∞‡≥Ä‡≤´‡≥ç', Rabi:'‡≤∞‡≤¨‡≤ø', 'Whole Year':'‡≤∏‡≤Ç‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ ‡≤µ‡≤∞‡≥ç‡≤∑', Summer:'‡≤¨‡≥Ü‡≥ï‡≤∏‡≤ø‡≤ó‡≥Ü', Autumn:'‡≤∂‡≤∞‡≤§‡≥ç‡≤ï‡≤æ‡≤≤', Winter:'‡≤ö‡≤≥‡≤ø‡≤ó‡≤æ‡≤≤' },
        submit: '‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø‡≤µ‡≤æ‡≤£‡≤ø', predicted: '‡≤Ö‡≤Ç‡≤¶‡≤æ‡≤ú‡≤ø‡≤§ ‡≤â‡≤§‡≥ç‡≤™‡≤æ‡≤¶‡≤®‡≥Ü:', error: '‡≤¶‡≥ã‡≤∑:'
      },
      mr: {
        brand: 'FarmFlow', page: '‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§Ö‡§Ç‡§¶‡§æ‡§ú', back:'‚Üê ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°‡§µ‡§∞ ‡§™‡§∞‡§§',
        title: '‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§Ö‡§Ç‡§¶‡§æ‡§ú', area: '‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ (‡§π‡•á‡§ï‡•ç‡§ü‡§∞)', areaPh: '‡§â‡§¶‡§æ., 2.5',
        state: '‡§∞‡§æ‡§ú‡•ç‡§Ø', statePh: '‡§â‡§¶‡§æ., ‡§ï‡§∞‡•ç‡§®‡§æ‡§ü‡§ï', district: '‡§ú‡§ø‡§≤‡•ç‡§π‡§æ', districtPh: '‡§â‡§¶‡§æ., ‡§Æ‡•à‡§∏‡•Ç‡§∞',
        season: '‡§π‡§Ç‡§ó‡§æ‡§Æ', select: '‡§®‡§ø‡§µ‡§°‡§æ...', crop: '‡§™‡•Ä‡§ï', cropPh: '‡§â‡§¶‡§æ., ‡§ó‡§π‡•Ç',
        seasons: { Kharif:'‡§ñ‡§∞‡•Ä‡§™', Rabi:'‡§∞‡§¨‡•ç‡§¨‡•Ä', 'Whole Year':'‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§∞‡•ç‡§∑', Summer:'‡§â‡§®‡•ç‡§π‡§æ‡§≥‡§æ', Autumn:'‡§∂‡§∞‡§¶', Winter:'‡§π‡§ø‡§µ‡§æ‡§≥‡§æ' },
        submit: '‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä', predicted: '‡§Ö‡§Ç‡§¶‡§æ‡§ú‡§ø‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®:', error: '‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä:'
      }
    };
    function getLang(){ try { return localStorage.getItem('i18nextLng') || 'en'; } catch(e){ return 'en'; } }
    function t(key){ const d=I18N[getLang()]||I18N.en; return key.split('.').reduce((o,k)=>(o||{})[k],d)||key; }
    function applyI18n(){
      document.querySelectorAll('[data-i18n]').forEach(el=>{ el.textContent = t(el.getAttribute('data-i18n')); });
      document.querySelectorAll('[data-i18n-ph]').forEach(el=>{ el.setAttribute('placeholder', t(el.getAttribute('data-i18n-ph'))); });
      document.querySelectorAll('[data-i18n-season]').forEach(el=>{ const v=el.getAttribute('data-value'); el.textContent = t('seasons.'+v) || v; });
    }
    document.addEventListener('DOMContentLoaded', ()=>{
      const params = new URLSearchParams(location.search);
      const paramLang = params.get('lang');
      if (paramLang && ['en','hi','kn','mr'].includes(paramLang)) {
        try { localStorage.setItem('i18nextLng', paramLang); } catch(e) {}
      }
      const sel=document.getElementById('langSelect');
      sel.value = paramLang || getLang();
      sel.addEventListener('change', function(){ try{localStorage.setItem('i18nextLng', this.value);}catch(e){} applyI18n(); });
      applyI18n();
    });
  </script>
</head>
<body>
  <!-- Navbar -->
  <div class="ff-navbar">
    <div class="container py-2 d-flex align-items-center justify-content-between" style="background:transparent;">
      <div class="d-flex align-items-center gap-2">
        <span class="brand">üå± <span data-i18n="brand">FarmFlow</span></span>
        <span class="text-muted">|</span>
        <span class="text-muted" data-i18n="page">Yield Estimation</span>
      </div>
      <div class="d-flex align-items-center gap-2">
        <select id="langSelect" class="form-select form-select-sm" style="width:auto">
          <option value="en">English</option>
          <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
        </select>
        <a href="http://localhost:5173/dashboard" class="btn btn-outline-secondary btn-sm" data-i18n="back">‚Üê Back to Dashboard</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="container">
      <h1 data-i18n="title">Yield Prediction</h1>
      <form method="POST" action="/predict">
        <label data-i18n="area">Area (hectares)</label>
        <input type="number" step="0.01" name="Area" data-i18n-ph="areaPh" placeholder="e.g., 2.5" required>

        <label data-i18n="state">State</label>
        <input type="text" name="State_Name" data-i18n-ph="statePh" placeholder="e.g., Maharashtra" required>

        <label data-i18n="district">District</label>
        <input type="text" name="District_Name" data-i18n-ph="districtPh" placeholder="e.g., Pune" required>

        <label data-i18n="season">Season</label>
        <select name="Season" required>
          <option value="" data-i18n="select">Select...</option>
          <option data-i18n-season data-value="Kharif">Kharif</option>
          <option data-i18n-season data-value="Rabi">Rabi</option>
          <option data-i18n-season data-value="Whole Year">Whole Year</option>
          <option data-i18n-season data-value="Summer">Summer</option>
          <option data-i18n-season data-value="Autumn">Autumn</option>
          <option data-i18n-season data-value="Winter">Winter</option>
        </select>

        <label data-i18n="crop">Crop</label>
        <input type="text" name="Crop" data-i18n-ph="cropPh" placeholder="e.g., Wheat" required>

        <button type="submit" class="btn" data-i18n="submit">Predict</button>
      </form>

      {% if prediction %}
        <div class="result">
          <span data-i18n="predicted">Predicted Production:</span> <b>{{ prediction|round(4) }}</b>
        </div>
      {% endif %}
      {% if error %}
        <div class="error">
          <span data-i18n="error">Error:</span> {{ error }}
        </div>
      {% endif %}
    </div>
  </div>
</body>
</html>
